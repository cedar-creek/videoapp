(()=>{document.querySelector("#start-camera");let e=document.querySelector("#video"),t=document.querySelector("#start-record"),o=document.querySelector("#stop-record"),n=document.querySelector("#download-video"),c=null,d=null,i=[],a=!0;e.muted=!0;let r={audio:!0,video:{aspectRatio:16/9,width:{ideal:1080},height:{ideal:1920},facingMode:{exact:"user"}}};async function l(t){c=await navigator.mediaDevices.getUserMedia(t),document.querySelector(".overlay").style.display="block",e.srcObject=c}t.addEventListener("click",(function(){d=new MediaRecorder(c,{mimeType:"video/webm"}),d.addEventListener("dataavailable",(function(e){i.push(e.data)})),d.addEventListener("stop",(function(){let e=URL.createObjectURL(new Blob(i,{type:"video/webm"}));n.href=e})),d.start(1e3)})),o.addEventListener("click",(function(){d.stop()})),document.getElementById("flip-button").onclick=function(){a=!a,r.video.facingMode.exact=a?"user":"environment";const e=c.getTracks();if(e)for(let t=0;t<e.length;t++)e[t].stop();l(r)},l(r)})();